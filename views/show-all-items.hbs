<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">

<!-- jQuery library -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<!-- Latest compiled JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>



{{!-- <script src="https://code.jquery.com/jquery-3.3.1.js"> </script> --}}
<script src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js"> </script>
 <link href="https://cdn.datatables.net/1.10.19/css/jquery.dataTables.min.css" rel="stylesheet">
<div id="table-items">
<table id="items" name="items" border="1px"> 
    <thead>
            <tr>
                <th>Item_Name</th>
                <th>Item_Cost</th>
                <th>Item_Quantity</th>
                <th> </th>
                <th> </th>
               
            </tr>
        </thead>

  <tbody>
    {{#each items}}
   
            <tr>
        <td>{{item_name}}</td>
        <td>{{item_cost}}</td>
        <td>{{item_quantity}}</td>
        <td><button id="edit" class="edit" name="edit" >Edit</button></td>
        <td><button id="delete" class="delete" name="delete" >Delete</button></a>
    </tr>
   
    {{/each}}
 </tbody>
</table>
</div>


<!--MODAL -->
    <div class="modal fade region-add-modal" id="edit_category_modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <form action="/edit-items" method="post" >
     
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
              <h6 class="modal-title">Edit Facets</h6>
            </div>
            <div class="modal-body">
              <div class="form-group m-b-20">
             
              <label>Item Name  <span class="text-danger">*</span></label>
              <input type="text" class="form-control fnb-input" name="item_name" id="item_name" placeholder="Item Name" readonly>
            </div>

            <div class="form-group m-b-20">
            
              <label>Item Cost  <span class="text-danger">*</span></label>
               <input type="text" class="form-control fnb-input" name="item_cost" id="item_cost" placeholder="Enter Item Cost">
            </div>

            <div class="form-group m-b-20">
            
              <label>Item Quantity  <span class="text-danger">*</span></label>
               <input type="text" class="form-control fnb-input" name="item_quantity" id="item_quantity" placeholder="Enter Item Quantity">
            </div>

            </div>
          <div class="modal-footer">
            <button type="button" class="btn fnb-btn outline no-border" data-dismiss="modal">Cancel</button>
            <button type="submit" name="update" id="update" class="btn primary-btn fnb-btn no-radius">Save</button>
          </div>

        </form>
      </div>
    </div>
  </div> <!-- modals closed -->


<!--MODAL -->
    <div class="modal fade region-add-modal" id="delete_item_modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <form action="/delete-items" method="post" >
     
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
              <h6 class="modal-title">Delete Item</h6>
            </div>
            <div class="modal-body">
              <div class="form-group m-b-20">
             
              <label>Sure you want to delete?  <span class="text-danger">*</span></label>
              <input type="text" class="form-control fnb-input" name="item_name_delete" id="item_name_delete" placeholder="Item Name" readonly>
            </div>

            <div>
            <button type="submit" name="yes_delete" id="yes_delete" class="btn primary-btn fnb-btn no-radius">Yes</button>
            <button type="button" class="btn fnb-btn outline no-border" data-dismiss="modal">No</button>
            </div>
            </div>
          <div class="modal-footer">
            <button type="button" class="btn fnb-btn outline no-border" data-dismiss="modal">Cancel</button>
           
          </div>

        </form>
      </div>
    </div>
  </div> <!-- modals closed -->



<script> 
$(document).ready(function() {
  
  var table=$('#items').DataTable({
   
      initComplete: function (){
        //modals
        var api = this.api();
        api.$('#edit').click( function () {
           var row  = $(this).parents('tr')[0];
           //for row data
           var stuff= table.row( row ).data() ;
                   
          console.log("hey! ",stuff); 
          fillmodalData(stuff); //calling function to fill the data in modal

          $("#edit_category_modal").modal(); //popping up the modal
          } ); //editB


        
        api.$('#delete').click( function () {
           var row  = $(this).parents('tr')[0];
           //for row data
           var stuff= table.row( row ).data() ;
            console.log("hey! ",stuff[0]);
          fillmodalDeleteData(stuff[0]); //calling function to fill the data in modal

          $("#delete_item_modal").modal(); //popping up the modal
           
         
          } ); //editB



      } //initcomplete
  } ); //items
});//datatable            
//function to fill the modal with data
function fillmodalData(details)
{
  $('#item_name').val(details[0]);
  $('#item_cost').val(details[1]);
  $('#item_quantity').val(details[2]);
  
}
function fillmodalDeleteData(details){
  $('#item_name_delete').val(details);
}
function completeAndRedirect(){
   var item_name = document.getElementById("item_name").value;
        var item_cost = document.getElementById("item_cost").value;
        var item_quantity = document.getElementById("item_quantity").value;
       //window.location = "/edit_items"+item_name+item_cost+item_quantity;

       window.location = "edit_items?item_name="+item_name+"&item_cost="+item_cost+"&item_quantity="+item_quantity;
}
</script>
